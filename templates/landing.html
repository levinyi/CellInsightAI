{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% trans "CellInsightAI - 智能细胞分析平台" %}</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        /* Theme Variables - 从 base.html 继承 */
        :root {
            /* 深色主题（默认） */
            --background: #0b1220;
            --panel: #121a2b;
            --text: #eaf0ff;
            --muted: #8ea0b7;
            --border: rgba(255,255,255,0.08);
            --primary: #4f8df5;
            --primary-hover: #3a7ae4;
            --button-secondary-hover: rgba(255,255,255,0.04);
            --hover: rgba(255,255,255,0.04);
            --navbar-bg: #121a2b;
            --navbar-text: #bcd1ff;
            /* logo 主题变量 */
            --logo-bg: #e4b429;
            --logo-radius: 8px;
        }
        
        /* 亮色主题变量 */
        [data-theme="light"] {
            --background: #ffffff;
            --panel: #f8fafc;
            --text: #1e293b;
            --muted: #64748b;
            --border: rgba(0,0,0,0.1);
            --primary: #3b82f6;
            --primary-hover: #2563eb;
            --button-secondary-hover: rgba(0,0,0,0.04);
            --hover: rgba(0,0,0,0.04);
            --navbar-bg: #ffffff;
            --navbar-text: #0a1120;
            /* logo 主题变量 */
            --logo-bg: #fbbf24;
            --logo-radius: 6px;
        }

        /* Global Styles */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--background);
            color: var(--text);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        /* 为了兼容导航栏样式 */
        .navbar-nav .nav-link {
            color: var(--navbar-text) !important;
        }
        
        .navbar-nav .nav-link:hover {
            color: var(--primary) !important;
        }
        
        .navbar-nav .navbar-text {
            color: var(--navbar-text) !important;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Logo 样式 */
        .logo-mark {
            width: 28px;
            height: 28px;
            margin-right: 8px;
            background: var(--logo-bg);
            border-radius: var(--logo-radius);
            transition: background-color 0.3s ease;
        }

        /* 从 base.html 复制主题相关功能 */
        .theme-toggle {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text);
            padding: 6px 8px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .theme-toggle:hover {
            background: var(--hover);
            border-color: var(--primary);
        }

        .theme-icon {
            width: 16px;
            height: 16px;
        }

        /* 移除页面顶部边距以避免与导航栏冲突 */
        .hero {
            padding: 80px 0 120px;
            text-align: center;
            background: linear-gradient(135deg, var(--background) 0%, var(--panel) 100%);
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 24px;
            background: linear-gradient(135deg, var(--primary), var(--text));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-size: 1.25rem;
            color: var(--muted);
            margin-bottom: 48px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-actions {
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Icon Components */
        .icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary), var(--text));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
        }

        .icon svg {
            width: 24px;
            height: 24px;
            color: white;
        }

        /* Pillars Section */
        .pillars {
            padding: 80px 0;
            background: var(--panel);
        }

        .pillars h2 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 64px;
            font-weight: 700;
        }

        .pillars-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 48px;
        }

        .pillar {
            text-align: center;
            padding: 32px;
            background: var(--background);
            border-radius: 16px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .pillar:hover {
            transform: translateY(-8px);
            border-color: var(--primary);
            box-shadow: 0 16px 32px rgba(79, 141, 245, 0.1);
        }

        .pillar .icon {
            margin: 0 auto 24px;
        }

        .pillar h3 {
            font-size: 1.5rem;
            margin-bottom: 16px;
            font-weight: 600;
        }

        .pillar p {
            color: var(--muted);
            line-height: 1.6;
        }

        /* Feature Grid */
        .features {
            padding: 80px 0;
        }

        .features h2 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 64px;
            font-weight: 700;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 32px;
        }

        .feature-card {
            padding: 32px;
            background: var(--panel);
            border-radius: 16px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-4px);
            border-color: var(--primary);
            box-shadow: 0 8px 24px rgba(79, 141, 245, 0.1);
        }

        .feature-card .icon {
            width: 40px;
            height: 40px;
            margin-bottom: 16px;
        }

        .feature-card h3 {
            font-size: 1.25rem;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .feature-card p {
            color: var(--muted);
            line-height: 1.6;
            margin: 0;
        }

        /* Workflow Section */
        .workflow {
            padding: 80px 0;
            background: var(--panel);
        }

        .workflow h2 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 64px;
            font-weight: 700;
        }

        .workflow-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 32px;
        }

        .workflow-step {
            text-align: center;
            padding: 32px 20px;
            background: var(--background);
            border-radius: 16px;
            border: 1px solid var(--border);
            position: relative;
            transition: all 0.3s ease;
        }

        .workflow-step:hover {
            transform: translateY(-4px);
            border-color: var(--primary);
        }

        .step-number {
            width: 48px;
            height: 48px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
            margin: 0 auto 24px;
        }

        .workflow-step h4 {
            font-size: 1.25rem;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .workflow-step p {
            color: var(--muted);
            margin: 0;
        }

        /* KBD Style */
        kbd {
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 4px 8px;
            font-family: ui-monospace, 'SF Mono', 'Monaco', 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
            font-size: 0.875rem;
            color: var(--text);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .hero-actions {
                flex-direction: column;
                align-items: center;
            }
            
            .pillars-grid {
                grid-template-columns: 1fr;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .workflow-steps {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Include Header Navigation -->
    {% include 'header.html' %}

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1>{% trans "智能细胞分析平台" %}</h1>
            <p>{% trans "利用人工智能技术，为生物医学研究提供精准、高效的细胞分析解决方案。从数据上传到结果可视化，一站式完成您的研究工作流程。" %}</p>
            <div class="hero-actions">
                <a href="/workbench" class="btn btn-primary">{% trans "立即开始" %}</a>
                <a href="#features" class="btn btn-secondary">{% trans "了解更多" %}</a>
            </div>
        </div>
    </section>

    <!-- Pillars Section -->
    <section class="pillars">
        <div class="container">
            <h2>{% trans "核心优势" %}</h2>
            <div class="pillars-grid">
                <div class="pillar">
                    <div class="icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 4L13.5 7H7V9H10.5V11H13.5V9H21ZM7 13V22H9V18H11V22H13V13H7Z"/>
                        </svg>
                    </div>
                    <h3>{% trans "精准识别" %}</h3>
                    <p>{% trans "基于深度学习的细胞识别算法，准确率高达98%以上，支持多种细胞类型的自动分类和计数。" %}</p>
                </div>
                <div class="pillar">
                    <div class="icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M15,18V16H6V18H15M18,14V12H6V14H18Z"/>
                        </svg>
                    </div>
                    <h3>{% trans "高效处理" %}</h3>
                    <p>{% trans "云端并行计算架构，支持大规模数据集处理，几分钟内完成传统方法需要数小时的分析任务。" %}</p>
                </div>
                <div class="pillar">
                    <div class="icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19,3H5C3.9,3 3,3.9 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.9 20.1,3 19,3M5,19V5H19V19H5Z"/>
                        </svg>
                    </div>
                    <h3>{% trans "智能可视化" %}</h3>
                    <p>{% trans "交互式图表和报告生成，多维度数据展示，让复杂的分析结果一目了然，支持自定义导出格式。" %}</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="features">
        <div class="container">
            <h2>{% trans "功能特性" %}</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                        </svg>
                    </div>
                    <h3>{% trans "多格式支持" %}</h3>
                    <p>{% trans "支持TIFF、PNG、JPEG等多种图像格式，兼容主流显微镜设备输出。" %}</p>
                </div>
                <div class="feature-card">
                    <div class="icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7,2V4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6A2,2 0 0,0 20,4H17V2H15V4H9V2H7M4,8H20V18H4V8M6,10V12H8V10H6M6,14V16H8V14H6M10,10V12H18V10H10M10,14V16H14V14H10Z"/>
                        </svg>
                    </div>
                    <h3>{% trans "批量处理" %}</h3>
                    <p>{% trans "一次性上传多个文件，自动批量分析，大幅提升研究效率。" %}</p>
                </div>
                <div class="feature-card">
                    <div class="icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/>
                        </svg>
                    </div>
                    <h3>{% trans "实时监控" %}</h3>
                    <p>{% trans "任务进度实时跟踪，分析状态一目了然，支持邮件通知。" %}</p>
                </div>
                <div class="feature-card">
                    <div class="icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,7C13.4,7 14.8,8.6 14.8,10V11.5C15.4,11.5 16,12.1 16,12.7V16.2C16,16.8 15.4,17.3 14.8,17.3H9.2C8.6,17.3 8,16.8 8,16.2V12.7C8,12.1 8.6,11.5 9.2,11.5V10C9.2,8.6 10.6,7 12,7M12,8.2C11.2,8.2 10.5,8.7 10.5,10V11.5H13.5V10C13.5,8.7 12.8,8.2 12,8.2Z"/>
                        </svg>
                    </div>
                    <h3>{% trans "数据安全" %}</h3>
                    <p>{% trans "企业级安全保障，数据传输和存储全程加密，符合医疗数据安全标准。" %}</p>
                </div>
                <div class="feature-card">
                    <div class="icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7,7H17V10H7V7M7,12H17V15H7V12M8,16H16V19H8V16M5,8V20H19V8H5M19,3A2,2 0 0,1 21,5V20A2,2 0 0,1 19,22H5A2,2 0 0,1 3,20V5A2,2 0 0,1 5,3H19Z"/>
                        </svg>
                    </div>
                    <h3>{% trans "API接口" %}</h3>
                    <p>{% trans "提供RESTful API，支持与现有系统集成，满足定制化需求。" %}</p>
                </div>
                <div class="feature-card">
                    <div class="icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6.5,2C5.89,2 5.39,2.5 5.39,3.11C5.39,3.72 5.89,4.22 6.5,4.22H10.5V7H3V9H10.5V10.5H6.5C5.89,10.5 5.39,11 5.39,11.61C5.39,12.22 5.89,12.72 6.5,12.72H10.5V17H12.5V12.72H17.5C18.11,12.72 18.61,12.22 18.61,11.61C18.61,11 18.11,10.5 17.5,10.5H12.5V9H21V7H12.5V4.22H17.5C18.11,4.22 18.61,3.72 18.61,3.11C18.61,2.5 18.11,2 17.5,2H6.5M6.5,3.11H17.5V3.11H6.5V3.11M6.5,11.61H17.5V11.61H6.5V11.61Z"/>
                        </svg>
                    </div>
                    <h3>{% trans "云端部署" %}</h3>
                    <p>{% trans "基于云原生架构，弹性扩容，无需本地硬件投资。" %}</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Workflow Section -->
    <section class="workflow">
        <div class="container">
            <h2>{% trans "使用流程" %}</h2>
            <div class="workflow-steps">
                <div class="workflow-step">
                    <div class="step-number">1</div>
                    <h4>{% trans "上传数据" %}</h4>
                    <p>{% trans "拖拽或选择细胞图像文件，支持单个或批量上传。" %}</p>
                </div>
                <div class="workflow-step">
                    <div class="step-number">2</div>
                    <h4>{% trans "智能分析" %}</h4>
                    <p>{% trans "AI算法自动识别和分析细胞，提取关键特征参数。" %}</p>
                </div>
                <div class="workflow-step">
                    <div class="step-number">3</div>
                    <h4>{% trans "结果展示" %}</h4>
                    <p>{% trans "生成详细分析报告，包含统计图表和可视化结果。" %}</p>
                </div>
                <div class="workflow-step">
                    <div class="step-number">4</div>
                    <h4>{% trans "导出共享" %}</h4>
                    <p>{% trans "下载分析结果，支持PDF、Excel等多种格式导出。" %}</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- 从 base.html 复制的主题切换功能 -->
    <script>
        // CSRF Token 获取
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        const csrftoken = getCookie('csrftoken');

        // 主题切换功能
        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                document.documentElement.setAttribute('data-theme', savedTheme);
            }
            applyNavbarTheme();
            updateThemeButton();
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            applyNavbarTheme();
            updateThemeButton();
        }

        function applyNavbarTheme() {
            const navbar = document.querySelector('.navbar');
            if (!navbar) return;
            
            const currentTheme = document.documentElement.getAttribute('data-theme');
            if (currentTheme === 'light') {
                navbar.classList.remove('navbar-dark', 'bg-dark');
                navbar.classList.add('navbar-light');
                navbar.style.backgroundColor = 'var(--panel)';
                navbar.style.borderBottom = '1px solid var(--border)';
            } else {
                navbar.classList.remove('navbar-light');
                navbar.classList.add('navbar-dark', 'bg-dark');
                navbar.style.backgroundColor = '';
                navbar.style.borderBottom = '';
            }
        }

        function updateThemeButton() {
            const button = document.getElementById('theme-toggle');
            const icon = button?.querySelector('.theme-icon');
            const text = button?.querySelector('.theme-text');
            
            if (!button || !icon || !text) return;
            
            const currentTheme = document.documentElement.getAttribute('data-theme');
            if (currentTheme === 'light') {
                icon.innerHTML = '<path d="M8 11a3 3 0 110-6 3 3 0 010 6zm2 .755V14a2 2 0 11-4 0v-2.245a5 5 0 104 0z"/>';
                text.textContent = '暗色';
            } else {
                icon.innerHTML = '<path d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5 0 01.5.5v2a.5.5 0 01-1 0v-2A.5.5 0 018 0zm0 13a.5.5 0 01.5.5v2a.5.5 0 01-1 0v-2A.5.5 0 018 13zm8-5a.5.5 0 01-.5.5h-2a.5.5 0 010-1h2a.5.5 0 01.5.5zM3 8a.5.5 0 01-.5.5h-2a.5.5 0 010-1h2A.5.5 0 013 8zm10.657-5.657a.5.5 0 010 .707l-1.414 1.414a.5.5 0 11-.707-.707l1.414-1.414a.5.5 0 01.707 0zm-9.193 9.193a.5.5 0 010 .707L3.05 13.657a.5.5 0 01-.707-.707l1.414-1.414a.5.5 0 01.707 0zm9.193 2.121a.5.5 0 01-.707 0l-1.414-1.414a.5.5 0 11.707-.707l1.414 1.414a.5.5 0 010 .707zM4.464 4.465a.5.5 0 01-.707 0L2.343 3.05a.5.5 0 11.707-.707l1.414 1.414a.5.5 0 010 .707z"/>';
                text.textContent = '亮色';
            }
        }

        // 页面加载时初始化主题
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
        });
    </script>
</body>
</html>