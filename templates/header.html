{% load i18n %}
<nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
    <div class="container-fluid">
        <a class="navbar-brand" href="{{ APP_URLS.HOME }}">
            <img src="/static/logo.svg" alt="logo" class="logo-mark">
            <strong>CellInsightAI</strong>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link" href="{{ APP_URLS.WORKBENCH }}">{% trans "工作台" %}</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ APP_URLS.MEMBERS }}">{% trans "成员管理" %}</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ APP_URLS.ORGANIZATION_MEMBERS }}">{% trans "组织成员" %}</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ APP_URLS.SUBSCRIPTION }}">{% trans "订阅" %}</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ APP_URLS.PROFILE }}">{% trans "个人设置" %}</a>
                </li>
            </ul>
            <ul class="navbar-nav">
                <!-- 语言切换按钮 -->
                <li class="nav-item dropdown me-2">
                    <button class="btn btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" style="background: transparent; border: 1px solid var(--border); color: var(--text); height: 32px;">
                        <svg class="icon" viewBox="0 0 16 16" fill="currentColor" style="width: 14px; height: 14px; margin-right: 4px;">
                            <path d="M4.545 6.714L4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286H4.545zm1.634-.736L5.5 3.956h-.049l-.679 2.022H6.18z"/>
                            <path d="M0 2a2 2 0 012-2h7a2 2 0 012 2v3h3a2 2 0 012 2v7a2 2 0 01-2 2H7a2 2 0 01-2-2v-3H2a2 2 0 01-2-2V2zm2-1a1 1 0 00-1 1v7a1 1 0 001 1h7a1 1 0 001-1V2a1 1 0 00-1-1H2zm7.138 9.995c.193.301.402.583.63.846-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6.066 6.066 0 01-.415-.492 1.988 1.988 0 01-.94.31z"/>
                        </svg>
                        {% get_current_language as LANGUAGE_CODE %}
                        {% if LANGUAGE_CODE == 'zh-hans' %}
                            中文
                        {% else %}
                            English
                        {% endif %}
                    </button>
                    <ul class="dropdown-menu">
                        <li>
                            <form action="{% url 'set_language' %}" method="post" style="margin: 0;">
                                {% csrf_token %}
                                <input name="next" type="hidden" value="{{ request.get_full_path }}" />
                                <button class="dropdown-item" type="submit" name="language" value="zh-hans">
                                    简体中文
                                </button>
                            </form>
                        </li>
                        <li>
                            <form action="{% url 'set_language' %}" method="post" style="margin: 0;">
                                {% csrf_token %}
                                <input name="next" type="hidden" value="{{ request.get_full_path }}" />
                                <button class="dropdown-item" type="submit" name="language" value="en">
                                    English
                                </button>
                            </form>
                        </li>
                    </ul>
                </li>
                <!-- 主题切换按钮 -->
                <li class="nav-item me-2">
                    <button id="theme-toggle" class="theme-toggle" onclick="toggleTheme()" title="{% trans '切换主题' %}">
                        <svg class="theme-icon" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5 0 01.5.5v2a.5.5 0 01-1 0v-2A.5.5 0 018 0zm0 13a.5.5 0 01.5.5v2a.5.5 0 01-1 0v-2A.5.5 0 018 13zm8-5a.5.5 0 01-.5.5h-2a.5.5 0 010-1h2a.5.5 0 01.5.5zM3 8a.5.5 0 01-.5.5h-2a.5.5 0 010-1h2A.5.5 0 013 8zm10.657-5.657a.5.5 0 010 .707l-1.414 1.415a.5.5 0 11-.707-.708l1.414-1.414a.5.5 0 01.707 0zm-9.193 9.193a.5.5 0 010 .707L3.05 13.657a.5.5 0 01-.707-.707l1.414-1.414a.5.5 0 01.707 0zm9.193 2.121a.5.5 0 01-.707 0l-1.414-1.414a.5.5 0 11.707-.707l1.414 1.414a.5.5 0 010 .707zM4.464 4.465a.5.5 0 01-.707 0L2.343 3.05a.5.5 0 11.707-.707l1.414 1.414a.5.5 0 010 .708z"/>
                        </svg>
                        <span class="theme-text">{% trans "亮色" %}</span>
                    </button>
                </li>
                <li class="nav-item" id="user_info" style="display: none;">
                    <span class="navbar-text">{% trans "欢迎" %}，<span id="nav_user_name">-</span></span>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ APP_URLS.LOGIN }}" id="login_link">{% trans "登录" %}</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" id="demo_login_link" onclick="return demoLogin()">{% trans "Demo 登录" %}</a>
                </li>
                <li class="nav-item" style="display: none;" id="logout_item">
                    <a class="nav-link" href="#" onclick="return logout()">{% trans "退出" %}</a>
                </li>
            </ul>
        </div>
    </div>
</nav>